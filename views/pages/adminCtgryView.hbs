<!DOCTYPE html>
<html lang="en">
<head>
    {{!-- <link rel="stylesheet" href="/styles/productAdd.css"> --}}
    <link rel="stylesheet" href="/styles/adminProductView.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
</head>
<body>
    <section class="admin-content">
        <input class="form-control" id="myInput" type="text" placeholder="Search any Field Here....">
        <br>
        <table class="table table-bordered table-striped">
            <thead>
                <tr>
                    <th>CategoryId</th>
                    <th>CategoryName</th>
                    <th>preview</th>
                    <th></th>
                    <th></th>
                </tr>
            </thead>
            <tbody id="myTable">
                {{#each ctgrys}}
                <tr>
                    <td>{{this._id}}</td>
                    <td>{{this.ctgryName}}</td>
                    <td><img src="{{this.photo.filepath}}.png" alt="" style="width:100px;height:60px" accept="image/png"></td>

                    <td><a href="/ctgry-view?oid={{this._id}}" class="butn btn-updt">Update</a></td>
                    {{#if this.isHide}}
                    <td>
                        <a href="#" onclick="showPopupUn(event, '{{this._id}}')" class="butn btn-del">UNHIDE</a>
                    </td>
                    {{else}}
                    <td>
                        <a href="#" onclick="showPopup(event, '{{this._id}}')" class="butn btn-del">HIDE</a>
                    </td>
                    {{/if}}
                </tr>
                {{/each}}
            </tbody>
        </table>
        <a href="/ctgry-add" style="border:none;padding:1rem;border-radius:12px;color:white;font-weight:700;background-color:rgb(69, 163, 239)">Add A Category</a>
    </section>

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            var input = document.getElementById("myInput");
            input.addEventListener("keyup", function () {
                var value = this.value.toLowerCase();
                var tableRows = document.querySelectorAll("#myTable tr");
                tableRows.forEach(function (row) {
                    var text = row.textContent.toLowerCase();
                    row.style.display = text.indexOf(value) > -1 ? "table-row" : "none";
                });
            });
        });

        function showPopupUn(event, categoryId) {
            event.preventDefault();
            Swal.fire({
                title: 'Are you sure?',
                text: "Do you really want to unhide it",
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#3085d6',
                cancelButtonColor: '#d33',
                confirmButtonText: 'Yes, unhide it!'
            }).then((result) => {
                if (result.isConfirmed) {
                    // Redirect to the unhide action
                    window.location.href = `/ctgry-view?unhide_oid=${categoryId}`;
                }
            });
        }
        function showPopup(event, categoryId) {
            event.preventDefault();
            Swal.fire({
                title: 'Are you sure?',
                text: "Do you really want to hide it",
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#3085d6',
                cancelButtonColor: '#d33',
                confirmButtonText: 'Yes, hide it!'
            }).then((result) => {
                if (result.isConfirmed) {
                    // Redirect to the unhide action
                    window.location.href = `/ctgry-view?hide_oid=${categoryId}`;
                }
            });
        }


            let li = document.querySelectorAll(".side-menu top li");
            li.forEach(item=>{
                item.classList.remove("active");
            })
            document.getElementById("CATEGORIES").classList.add("active");
    </script>
</body>
</html>
